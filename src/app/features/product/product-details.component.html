<div class="product-details-container" *ngIf="product">
  <div class="container">
    <div class="product-main">
      <div class="product-image-section">
        <div class="main-image">
          <img [src]="product.imageUrl || '/assets/placeholder.png'" [alt]="product.name" />
        </div>
      </div>

      <div class="product-info-section">
        <div class="product-header">
          <h1 class="product-title">{{ product.name }}</h1>
          <button
            class="wishlist-btn"
            [class.active]="isInWishlist()"
            (click)="toggleWishlist()"
            aria-label="Add to wishlist"
          >
            @if (isInWishlist()) {
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"
                />
              </svg>
            } @else {
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                />
              </svg>
            }
          </button>
        </div>

        <div class="product-category">
          <span class="category-badge">{{ getCategoryName() }}</span>
        </div>

        <div class="product-price-section">
          <span class="price">â‚¹{{ product.price }}</span>
          <span class="tax-info">Inclusive of all taxes</span>
        </div>

        <div class="product-description">
          <h3>Product Description</h3>
          <p>{{ product.description }}</p>
        </div>

        <div class="product-features">
          <h3>Features</h3>
          <ul>
            <li>Premium quality materials</li>
            <li>Perfect for gifting</li>
            <li>Comes with beautiful packaging</li>
            <li>Express delivery available</li>
          </ul>
        </div>

        <div class="product-actions">
          <button class="btn btn-add-cart" (click)="addToCart()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path
                d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"
              />
            </svg>
            Add to Cart
          </button>
          <button class="btn btn-buy-now" (click)="buyNow()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z"
                clip-rule="evenodd"
              />
            </svg>
            Buy Now
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="not-found" *ngIf="!product">
  <h2>Product not found</h2>
  <p>The product you're looking for doesn't exist.</p>
  <a routerLink="/shop" class="btn-back">Back to Shop</a>
</div>
