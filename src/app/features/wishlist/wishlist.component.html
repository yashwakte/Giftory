<div class="wishlist-container">
  <section class="wishlist-header">
    <div class="header-content">
      <div class="header-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"
          />
        </svg>
      </div>
      <div>
        <h1>My Wishlist</h1>
        <p class="subtitle">
          {{ wishlistService.wishlistCount() }}
          {{ wishlistService.wishlistCount() === 1 ? 'item' : 'items' }} saved for later
        </p>
      </div>
    </div>
    @if (wishlistService.wishlistCount() > 0) {
      <button class="clear-btn" (click)="clearWishlist()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z"
            clip-rule="evenodd"
          />
        </svg>
        Clear All
      </button>
    }
  </section>

  @if (wishlistService.wishlistCount() === 0) {
    <div class="empty-state">
      <div class="empty-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
          />
        </svg>
      </div>
      <h2>Your wishlist is empty</h2>
      <p>Save items you love to view them later. Start browsing!</p>
      <a routerLink="/shop" class="shop-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h4.59l-2.1 1.95a.75.75 0 001.02 1.1l3.5-3.25a.75.75 0 000-1.1l-3.5-3.25a.75.75 0 10-1.02 1.1l2.1 1.95H6.75z"
            clip-rule="evenodd"
          />
        </svg>
        Browse Gifts
      </a>
    </div>
  } @else {
    <div class="wishlist-grid">
      @for (product of wishlistService.getWishlist()(); track product.id) {
        <div class="wishlist-card">
          <div class="card-image">
            <a [routerLink]="['/product', product.id]">
              <img [src]="product.imageUrl" [alt]="product.name" />
            </a>
            <button
              class="remove-btn"
              (click)="removeFromWishlist(product.id)"
              aria-label="Remove from wishlist"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path
                  d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"
                />
              </svg>
            </button>
          </div>
          <div class="card-content">
            <a [routerLink]="['/product', product.id]" class="product-link">
              <h3>{{ product.name }}</h3>
            </a>
            <p class="product-category">{{ product.category }}</p>
            <div class="card-footer">
              <div class="price-section">
                <span class="price">₹{{ product.price.toLocaleString('en-IN') }}</span>
                @if (product.originalPrice && product.originalPrice > product.price) {
                  <span class="original-price"
                    >₹{{ product.originalPrice.toLocaleString('en-IN') }}</span
                  >
                }
              </div>
              <button class="add-to-cart-btn" (click)="addToCart(product)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path
                    d="M1 1.75A.75.75 0 011.75 1h1.628a1.75 1.75 0 011.734 1.51L5.18 3a65.25 65.25 0 0113.36 1.412.75.75 0 01.58.875 48.645 48.645 0 01-1.618 6.2.75.75 0 01-.712.513H6a2.503 2.503 0 00-2.46 2.043l-.121.612A.75.75 0 003.75 17h11.5a.75.75 0 010 1.5H3.75a2.25 2.25 0 01-2.204-2.723l.123-.612A4.003 4.003 0 015.59 12h1.5v-.01l-.12-.678a.75.75 0 01.735-.812h8.54l1.05-3.88h-11.3l-.075-.422A3.25 3.25 0 003.378 2.5H1.75A.75.75 0 011 1.75zM6 17.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15.5 19a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"
                  />
                </svg>
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="wishlist-actions">
      <a routerLink="/shop" class="continue-shopping">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z"
            clip-rule="evenodd"
          />
        </svg>
        Continue Shopping
      </a>
      <a routerLink="/cart" class="view-cart">
        View Cart
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z"
            clip-rule="evenodd"
          />
        </svg>
      </a>
    </div>
  }
</div>
